<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Guide d'installation de Chamilo</title>
        <link rel="stylesheet" href="../web/assets/bootstrap/dist/css/bootstrap.css" type="text/css" media="screen,projection" />
        <link rel="stylesheet" href="default.css" type="text/css" media="screen,projection" />
        <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />

    </head>
    <body>
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">Chamilo - Documentation</a>
                </div>

                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="index.html">Home</a></li>
                        <li ><a href="readme.html">About</a></li>
                        <li><a href="license.html">License</a></li>
                        <li><a href="credits.html">Credits</a></li>
                        <li ><a href="dependencies.html">Dependencies</a></li>
                        <li><a href="changelog.html">Changelog</a></li>
                    </ul>
                </div><!--/.nav-collapse -->
            </div>
        </nav>

        <div class="container">
            <h1>Guide d'installation de Chamilo LMS 1.11</h1>

            <p>Merci d'avoir téléchargé Chamilo</p>
            <ul>
                <li>Vous pouvez tester Chamilo LMS, en tnt que professeur, sans l'installer, sur <a href="https://campus.chamilo.org/?language=french">le campus libre de Chamilo</a></li>
            </ul>
            <p>Ce guide explique comment installer Chamilo LMS. Nous recommandons activement la lecture complète de ce guide avant de commencer l'installation.</p>
            <p>English: Get back to the <a href="installation_guide.html">English version of the installation guide</a>.</p>
            <p>Spanish: También puede leer <a href="installation_guide_es_ES.html">esta guía de instalación en español</a>.</p>
            <p>Italiano: puoi leggere <a href="installation_guide_it_IT.html">questa guida anche in italiano</a>.</p>


            <h2><b>Index</b></h2>

            <ol>

                <li><a href="#1._Pre-requisites">Prérequis</a></li>
                <li><a href="#2._Installation_of_Chamilo_LMS">Installation de Chamilo LMS</a></li>
                <li><a href="#3._Upgrade_from_a_previous_version_of">Upgrade depuis une version antérieure de Chamilo/Dok€os</a></li>
                <li><a href="#4._Troubleshooting">Problèmes</a></li>
                <li><a href="#5._Administration_section">La section d'administration</a></li>
                <li><a href="#6._LDAP">LDAP&nbsp;</a></li>
                <li><a href="#9._WIRIS_mathematical_formulas">Formules mathématiques avec Wiris MathType</a></li>
                <li><a href="#10._Xapian_fulltext_indexing">Indexation full-text avec Xapian</a></li>
                <li><a href="#11._Chamilo_rapid_ppt_conversion">Chamilo Rapid - système de conversion PPT</a></li>
                <li><a href="#12._Setting_cron_up">Configurer de tâches "chronologiques"</a></li>
                <li><a href="#13._Changing_language_names_order">Changer l'ordre des noms/prénoms par langue</a></li>
                <li><a href="#14._Improving_files_download">Améliorer le temps de téléchargement de fichiers</a></li>
                <li><a href="#15._Videoconference">Vidéo-conférence</a></li>
                <li><a href="#16._Rewrite">Configuration de la réécriture</a></li>
            </ol>

            <br />
            <hr style="width: 100%; height: 2px;" />
            <h2><a id="1._Pre-requisites"></a>1. Prérequis</h2>

            Chamilo peut être installé sous Windows, Linux, Max OS X et serveurs UNIX
            indifféremment. Cela dit, nous recommandons activement l'utilisation d'un
            serveur Linux pour sa flexibilité optimale, son facile contrôle à distance
            et sa capacité de redimensionnement. En particulier, nous recommandons la
            distribution Debian (ou sa petite soeur Ubuntu)<br />

            <br />

            Chamilo est un système de gestion de l'apprentissage (LMS) qui fonctionne
            principallement sur base d'un <span style="font-weight: bold;">serveur web (Apache 2.2+)</span>, de <span style="font-weight: bold;">MySQL 5.6+ ou de MariaDB 5+
            (5 ou 10)</span> et de <span style="font-weight: bold;">PHP 7.4</span>. <br />


            <br /><br />

            Tous ces éléments logiciels sont sous licence de logiciels libres et sont
            disponibles gratuitement.<br />

            <br />

            Pour faire fonctionner Chamilo <span style="font-weight: bold;">LMS</span> sur votre serveur,
            il est suggéré d'installer WAMP, LAMP ou MAMP (ou leurs composants
            individuellement):
            <ul>

                <li>Pour installer <span style="font-weight: bold;">WAMP</span> (AMP sous Windows), nous
                    recommandons le paquet
                    <a href="https://www.apachefriends.org/en/xampp.html">XAMPP</a> en
                    installateur ".exe"</li>

                <li>Pour installer <span style="font-weight: bold;">LAMP</span>
                    (AMP sous Linux), utilisez le système de gestion de paquets de votre
                    distribution préférée (apt, Synaptic, RPMFinder, yum etc.). Par exemple,
                    sur un serveur Ubuntu, vous pouvez utiliser le Shell (terminal) ou
                    Synaptic via le guide
                    <a href="https://ubuntuguide.org/wiki/Ubuntu:Feisty#Apache_HTTP_Server">
                        Ubuntuguide on Apache</a> et les sections suivantes du présent guide/li>

                <li>Pour installer <span style="font-weight: bold;">MAMP</span> (AMP sur Mac OS X),
                    référez-vous au site dédié de
                    <a href="https://www.mamp.info/en/index.php">MAMP</a></li>

                <li>Assurez-vous de vérifier les
                    <a href="dependencies.html" title="Dependencies">dépendances</a> si vous
                    avez besoin de connaîtres les pré-requis de façon plus précise.
            </ul>


            <br />


            <h3><span style="font-weight: bold;">Serveurs de base de données MySQL ou MariaDB</span></h3>

            Vous aurez besoin d'un login et d'un mot de passe pour gérer et <em>supprimer+créer</em> une base
            de données. Généralement, la configuration par défaut sur des ordinateurs
            locaux est de permettre la connexion comme utilisateur root avec un mot de passe
            vide. Il est FORTEMENT RECOMMANDÉ de modifier le mot de passe et de définir un
            utilisateur avec un accès à une (et une seule) base de données spécifique.
            Veuillez vous référer à la documentation de MySQL ou MariaDB pour ce faire.

            <br />
            <span class="text-muted">
                Les versions de Chamilo antérieures à la 1.9.0 nécessitaient de choisir entre une installation sur plusieurs bases
                et une installation obsolète sur une seule base. Ca a été clarifié et simplifié par l'usage d'une seule base de données.
            </span><br />
            <span class="text-muted">Si vous ne disposez pas des permissions de suppression+création de la base de
                données choisie, Chamilo ne pourra pas terminer l'installation car, pour éviter tout déchêt d'une
                version antérieure de Chamilo ou d'un autre système, nous supprimons d'abord la base de données avant
                de la recréer. C'est expliqué dans <a href="https://github.com/chamilo/chamilo-lms/issues/2172">un peu plus de détail dans cette demande</a></span><br />


            <h3><span style="font-weight: bold;">Redirections d'Apache</span></h3>
            <div>
                Depuis sa version 1.10, Chamilo exige que le serveur web puisse gérer les redirections. Il s'agit d'un pré-requis très commun de nos jours pour les applications web (autant CMS que LMS, ERP, etc) qui permet, entre autres, l'utilisation intelligente et user-friendly des URLs.<br />
                Si vous utilisez un autre serveur web qu'Apache, dirigez-vous à la section "Configuration de la réécriture" en fin de ce document.<br />
                Si vous utilisez Apache, la configuration des redirections se fait en deux étapes simples:
            <ul>
                <li>Activer le module "rewrite" d'Apache (en ligne de commande, faites simplement un "<i>sudo a2enmod rewrite</i>")</li>
                <li>Configurer le VirtualHost d'Apache pour qu'il inclue le bloc suivant, ce qui permettra l'interprétation des fichiers .htaccess</li>
            </ul>
            Pour Apache <=2.2 (remplacez /var/www/chamilo par le chemin vers votre répertoire de Chamilo):
            <pre>
    &lt;Directory /&gt;
        AllowOverride All
        Order allow,deny
        allow from all
    &lt;/Directory&gt;
    &lt;Directory /var/www/chamilo/&gt;
        AllowOverride All
        Order allow,deny
        allow from all
    &lt;/Directory&gt;
    </pre>
    et pour Apache >=2.4:
    <pre>
    &lt;Directory /&gt;
        AllowOverride All
        Require all granted
    &lt;/Directory&gt;
    &lt;Directory /var/www/chamilo/&gt;
        AllowOverride All
        Require all granted
    &lt;/Directory&gt;
    </pre>
            <br />
            Une fois configurée cette partie (qui est peut-être déjà mise en place par votre fournisseur d'hébergement), il suffit de redémarrer le serveur web pour activer la modification.
            </div>

            <hr style="width: 100%; height: 2px;" />
            <h2><a id="2._Installation_of_Chamilo_LMS"></a><span style="font-weight: bold;">2. Installation de Chamilo LMS</span></h2>

            <p>
                Avant d'installer Chamilo LMS, vous devez comprendre que du fait que Chamilo est un logiciel libre,
                de nombreux prestataires de service ont été en mesure de développer des extensions pour Chamilo,
                qui ont rendu son installation possible par différents biais :<br />
            <ul>
                <li>Comme un paquet "tout-compris" fourni par un fournisseur officiel certifié par l'association Chamilo</li>
                <li>Comme une solution installable depuis de nombreux hébergeurs supportant cPanel et Scriptaculous</li>
                <li>Sur votre hébergeur préféré en utilisant des installateurs distants comme Installatron</li>
                <li>Sur votre propre serveur, en le téléchargeant et l'installant manuellement</li>
                <li>Sur votre ordinateur, à la maison ou au bureau, juste pour tester et développer</li>
            </ul>
            Ce guide couvre uniquement les deux dernières méthodes. Pour les premières, veuillez consulter votre fournisseur de services pour plus d'infos.
            <br /><br />
            Pour installer Chamilo LMS, suivez ces 6 étapes :
            <ol>
                <li><a href="https://chamilo.org/download">Télécharger Chamilo LMS</a></li>
                <li>Décompressez-le</li>
                <li>Copiez le répertoire de Chamilo dans le répertoire racine de votre serveur web.
                    Celui-ci peut se trouver dans <span style="font-weight: bold;">C:\xampp\htdocs\</span> sur
                    une machine Windows avec WAMP, ou dans <span style="font-weight: bold;">/var/www/html/</span> (ou /var/www/) sur un serveur Linux</li>
                <li>Vérifiez que votre serveur web supporte les .htaccess (Voir la section "Configuration de la réécriture" plus bas)</li>
                <li>Ouvrez votre navigateur (Firefox, Chrome, ...) et tapez l'adresse suivante
                    <span style="font-weight: bold;">http://localhost/chamilo/</span> si vous l'avez installé localement ou
                    <span style="font-weight: bold;">https://www.domain.com/chamilo/</span> si vous l'avez installé à distance*
                </li>

                <li>Suivez le processus d'installation. Vous pouvez accepter toutes les
                    valeurs par défaut. Pensez à modifier le mot de passe d'administrateur
                    afin de vous en souvenir plus tard.</li>
            </ol>
            <span class="text-muted">* Nous recommandons de définir un Virtual Host spécifique pour cette installation, si vous avez les compétences pour ce faire</span>
            <br />
            <span class="muted">Note: si vous installez Chamilo localement en utilisant
                "localhost" ou l'adresse IP de votre ordinateur durant l'installation, vous
                pourriez rencontrer des difficultés lors de l'accès depuis d'autres ordinateurs.
                Pour éviter ça, vous pouvez
                <a href="https://beeznest.wordpress.com/2013/01/15/answering-to-different-addresses-with-chamilo/">appliquer une petite modification à votre
                    fichier de configuration</a>.</span>
            <br /> <br />
            Les répertoires suivants doivent êtres lisibles, éditables et exécutables par votre serveur web.
            <br />
            <span class="muted">Note: Cela ne requiert généralement pas de modification spécifique
                sous Windows (ce qui est d'ailleurs l'une des raisons principales pour
                l'existence d'autant de virus et malware pour ce système d'exploitation,
                mais cela demande l'utilisation de "chmod" sous Linux et Mac. Dans ces
                derniers cas, veuillez suivre les instructions qui suivent.</span>
            <br /><br />
            Remplacez [chamilo] par le répertoire où vous avez placé le contenu du zip:
            <ul>
                <li>[chamilo]/app/</li>
                <li>[chamilo]/vendor/ (nécessite seulement d'être lisible et exécutable)</li>
                <li>[chamilo]/web/</li>
                <li>[chamilo]/main/default_course_document/images/</li>
            </ul>
            Optionnellement, vous pouvez faire la même chose pour les répertoires suivants
            si vous souhaitez permettre l'envoi de styles CSS ou la définition de nouvelles
            langues par les administrateurs de Chamilo:
            <ul>
                <li>[chamilo]/main/lang/</li>
            </ul>
            <br />
            <span class="text-muted">
                Si vous trouvez un répertoire tests/ à la racine, veuillez le supprimer.
                Il s'agit d'un répertoire de développement qui ne bénéficie pas des
                vérifications de sécurité nécessaires pour un système en production. Il ne
                devrait en tout cas *jamais* être accessible aux utilisateurs finaux sur un
                système en production.
            </span>
            <br /><br />

            <p><span class="text-muted">Sous les systèmes d'exploitation Linux, Mac OS X et BSD, vous pouvez utiliser
                    la commande <em>chmod 0775</em> pour modifier les permissions, bien que nous
                    recommandions, pour des raisons de sécurité, de cherchez l'assistance d'un
                    administrateur système expérimenté pour le faire.
                    Sous Windows, vous pourriez avoir besoin de vérifier les propriétés de ces
                    répertoires (en cliquant dessus avec le bouton droit de la souris).</span></p>


            <h3>Sécurité : liste à vérifier après l'installation</h3>

            <ul>

                <li><strong>Protégez votre répertoire de configuration: </strong>
                    assurez-vous que personne (à part vous) ne puisse l'éditer.
                    Vous trouverez le répertoire de configuration dans <em>(chamilo folder)</em>/app/config.
                    Rendez-le lisible uniquement (windows/xwindows: click-droit sur le répertoire
                    pour en éditer les propriétés - Linux/BSD/MacOSX: utilisez la commande "chmod -r 0555".
                    Le fichier de configuration (main/inc/conf/configuration.php) est créé par votre serveur webThe config
                    file is created by your web server (Apache + PHP, usually) so you may
                    need to be root user to change its permissions.</li>

                <li><strong>Configurez votre installation de Chamilo: </strong>
                    dans la section d'administration de Chamilo, vous pouvez utiliser les paramètres
                    de configuration pour ajuster le comportement de votre installation.</li>

                <li>Des astuces pour une sécurité plus forte sont disponibles dans notre nouveau <a href="./security.html">guide de sécurité</a></li>
            </ul>

            <br />


            <h3>Configuration de PHP</h3>


            Pour obtenir le meilleur de votre installation de Chamilo, vous devez configurer vos paramètres PHP: <br />

            <ul>
                <li>
                    Configurer les mails de Chamilo : la plupart des portails Chamilo utilisent les propriétés mail définies dans le fichier php.ini.
                    Cependant si vous utilisez un serveur mail distinct, vous voudrez peut-être ajuster les propriétés mail
                    dans <em>(chamilo folder)</em>/app/config/mail.conf.php
                </li>
                <li>Editez le fichier php.ini (sous Windows, il devrait se trouver dans
                    <span style="font-weight: bold;">C:\xampp\php\php.ini</span>,
                    et sous Debian ou Ubuntu (Linux) :
                    <span style="font-weight: bold;">/etc/php5/apache2/php.ini</span></li>
                <li>cherchez les mots contenant "_max" et augmentez les deux valeurs pour optimiser le serveur</li>
                <li>nous recommandons les valeurs suivantes : </li>
            </ul>

            <div class="code">
                max_execution_time = 300 ;Maximum execution time of each script, in seconds<br />
                max_input_time = 600 ;Maximum amount of time each script may spend parsing request data<br />
                memory_limit = 128M ;Maximum amount of memory a script may consume (128MB)<br />
                post_max_size = 100M<br />
                upload_max_filesize = 100M;<br />
                short_open_tag       = Off<br />
                safe_mode            = Off<br />
                magic_quotes_gpc     = Off<br />
                magic_quotes_runtime = Off<br />
            </div>

            <br />
            <p>
                <strong>Important :</strong>
                Vous aurez besoin de définir votre <em>date.timezone</em> en fonction de votre fuseau horaire.
                Par exemple si votre serveur se trouve dans la zone America/New_York, indiquez cette valeur pour
                le paramètre date.timezone du fichier php.ini :
            </p>

            <div class="code">
                date.timezone = 'America/New_York'
            </div>

            <p><strong>Note:</strong> PHP 5.3.9 introduit un nouveau paramètre appelé
                "max_input_vars", qui limite le nombre d'éléments que vous pouvez envoyer au
                travers d'un formulaire déterminé. Si vous devez gérer de grandes quantités
                d'utilisateurs ou de longs parcours d'apprentissage (de nombreux éléments),
                assurez-vous de configurer ce paramètre plus haut que se valeur par défault
                de 1000.</p>

            <p><strong>Utilisateurs de BSD:</strong> les librairies suivantes doivent être
                incluses durant l'installation de PHP:</p>

            <ul>
                <li>php-session : L'extension pour le partage des sessions pour php</li>
                <li>php-mysqlnd (ou php5-mysqli) : L'extension mysql pour php</li>
                <li>php-zlib : L'extension zlib partagée pour php</li>
                <li>php-pcre:  L'extension pcre partagée pour php</li>
                <li>php-xml</li>
                <li>php-json</li>
                <li>php-iconv ou php5-mbstring (au choix)</li>
                <li>php-gd L'extension de manipulation d'images pour PHP</li>
                <li>php-intl L'extension pour la gestion de l'internationalisation pour PHP</li>
            </ul>

            <p>Nous recommandons aussi les extensions suivantes:</p>
            <ul>
                <li>php-ctype</li>
                <li>php-ldap</li>
                <li>php-xapian</li>
                <li>php-curl</li>
                <li>php-xsl</li>
                <li>php-soap, pour les services web en SOAP</li>
            </ul>

            <div style="color: red;">Certains sections de ce manuel ne sont pas encore traduites. N'hésitez pas à consulter
                le <a href="https://chamilo.org/forum">forum de Chamilo</a> si la lecture
                en anglais vous est impossible.</div>

            <hr />
            <h2><a id="3._Upgrade_from_a_previous_version_of"></a>3. Mettre à jour depuis
                une version antérieure de Chamilo LMS (1.*) ou de Dok€os (&lt;2.0)</h2>
            Avant de mettre à jour, nous recommandons chaudement la prise d'une copie de
            sauvegarde de votre installation (répertoires et bases de données).
            Si vous ne savez pas comment faire, consultez votre fournisseur d'hébergement
            ou un administrateur système qualifié avant de continuer l'installation.<br /><br />
            <em>Chamilo LMS 1.10 (et donc 1.11) est livré avec une nouvelle structure de bases de données
                en comparaison avec 1.8. Bien que le script de migration la prenne
                complètement en charge, il pourrait générer une surcharge sur votre serveur
                durant la mise à jour, et il changera la base de données de façon assez
                profonde, préservant les données le mieux possible (nous avons testé la
                procédure de nombreuses fois, mais rappelez-vous qu'il s'agit d'un logiciel
                GNU/GPLv3 et que nous ne saurions être tenus pour responsables de ce qui
                pourrait arriver à vos données sans la supervision d'un professionnel).
                C'est pour cela que nous recommandons *vraiment* de faire un backup complet de
                votre système avant la mise à jour.</em>
            <br />
            <br />
            Notez également que Chamilo LMS 1.10 (et donc 1.11) agrège les fichiers du dossier
            main/lang en un fichier unique par langue. Si vous avez modifiez les fichiers de langue directement (plutôt que
            d'utiliser la méthode recommandée des sous-langages), vous devriez faire une copie
            des traductions modifiées avant la mise à jour. Les sous-langages nécessitent également
            un peu de travail manuel, mais la procédure de mise à jour n'y touchera pas directement.
            <br /><br />
            <div><em>Important:</em> Si vous mettez à jour, vers 1.11.16, une plateforme installée avant 2016 (soit avant la version 1.11.0),
                il vous sera nécessaire de télécharger <a href="https://raw.githubusercontent.com/chamilo/chamilo-lms/5e0fc76649a7377c12cd0220ad1c0eae3f5eeaeb/tests/scripts/fix_quiz_id_to_iid.php">ce script</a>,
                de le déposer dans le répertoire main/inc/, de l'éditer pour retirer le <pre>exit;</pre> en ligne 15, puis de le charger dans votre navigateur
                comme https://votresite.com/main/inc/fix_quiz_id_to_iid.php. Ce script réglera un problème d'incohérence des identifiants internes des exercices, questions
                et réponses qui existait avant l'année 2016 (avant la version 1.11.0). Si votre système a été installé pour la première fois avec une version 1.11.0
                ou supérieure, vous n'avez rien à faire.</div>
            <div class="text-muted"> NOTE: Pour les bases de données très lourdes de Chamilo,
                certains de nos fournisseurs officiels ont dévelopé des procédures de
                migration optimisées qui utilisent plus de mémoire mais exécutent les
                migrations beaucoup plus rapidement. Si c'est le genre de choses qui
                vous intéresse, nous vous recommandons chaudement de les contacter (voir
                références ci-dessous).</div>
            <div class="text-muted">
                NOTE: Cette version de Chamilo peut seulement être utilisée pour mettre à jour des versions antérieures de Chamilo ou de Dok€os.
                Par exemple vous ne pouvez pas utiliser les scripts de mise à jour normaux de Chamilo 1.11 pour effectuer une mise à jour depuis Dok€os 2.0 (dont la sortie est ultérieure à celle de la création de Chamilo).
                Si vous avez besoin de   ce genre de choses, nous vous conseillons de contacter <a href="https://chamilo.org/providers">les fournisseurs officiels de l'Association Chamilo</a>)
            </div>

            <p></p>

            <h3>3.1 Mettre à jour depuis Chamilo 1.11.x (upgrade mineure)</h3>
            Comme cette version est une version mineure de Chamilo par rapport à une
            quelconque version 1.11.*, les seuls pas à suivre sont:
            <ul>
                <li>
                    vérifier que vous n'avez pas créé une version modifiée d'une feuille de
                    style en utilisant un répertoire css existant <span class="text-muted">(si c'est le cas, elle sera
                        écrasée par la mise à jour. Gardez-en une copie que vous renommerez au
                        moment de la replacer dans le répertoire main/css/)</span>
                </li>
                <li> téléchargez le paquet d'installation de Chamilo 1.11 depuis la
                    <a href="https://chamilo.org/download">page de téléchargement de Chamilo</a></li>
                <li> dézippez les nouveaux fichiers de Chamilo 1.11 par dessus les fichiers de
                    l'ancienne version (ou dézippez les fichiers dans un répertoire et copiez-les ensuite
                    là où se trouve votre version actuelle de Chamilo)</li>
                <li> éditez le fichier app/config/configuration.php: à la fin du fichier,
                    localisez le numéro de version antérieur (p.ex. '1.11.0') et remplacez-le
                    par le numéro de la nouvelle version (p.ex. '1.11.2')</li>
                <li> Videz votre dossier archive/ : faites une copie temporaire de index.html, supprimez touss les contenus *dans* ce dossier (ne supprimer pas le dossier, juste ses contenus). Vous pouvez également vider ce dossier depuis le lien "Vidange du répertoire archive" du bloc "Système" de l'interface d'administration.</li>
                <li> fini! Il n'y a pas d'autre procédure requise</li>
            </ul>

            <br />

            <h3>3.2 Mettre à jour depuis Chamilo 1.9.x ou 1.10.x</h3>
            <ul>
                <li> assurez-vous qu'aucune table ne persiste d'une version antérieure de Chamilo. Ces tables peuvent en effet causer une erreur durant la mise à jour. En particulier, les tables des versions 1.8.* et antérieures pouvaient se répéter une fois par cours, résultant en un grand nombre de tables partageant le même préfixe. Seules les tables sans préfixe ou avec un préfixe "c_" sont légitimes dans les versions 1.9 et supérieures. Assurez-vous qu'aucune de ces anciennes tables ne persiste. Prenez une copie de sauvegarde de votre base de données (au cas où) puis supprimez-les (drop table ...).</li>
                <li> vérifiez que vous n'avez pas laissé de feuille de style personnalisée ou d'image <span class="text-muted">(le cas échant, faites-en une sauvegarde*)</span></li>
                <li> télécharger le paquet Chamilo 1.11 depuis la <a href="https://chamilo.org/download">page de téléchargement de Chamilo</a></li>
                <li> décompressez les nouveaux fichiers de Chamilo 1.11 sur les fichiers de votre ancienne installation (ou décompressez les dans un nouveau dossier et copier les fichiers extraits sur les anciens fichiers).</li>
                <li> vérifiez que le fichier .htaccess de la version 1.11 a bien été copié</li>
                <li> vérifiez que "AllowOverride All" est présent dans votre configuration Apache, car l'interprétation du fichier .htaccess est capitale pour le fonctionnement de Chamilo</li>
                <li> accéder à l'adresse de votre portail URL + main/install </li>
                <li> Choisissez votre langue et cliquez sur <span style="font-style: italic;">Mettre à jour depuis la version 1.8.x / 1.9.x</span></li>
                <li> Videz votre dossier archive/ : faites une copie temporaire de index.html, supprimez touss les contenus *dans* ce dossier (ne supprimer pas le dossier, juste ses contenus). Vous pouvez également vider ce dossier depuis le lien "Vidange du répertoire archive" du bloc "Système" de l'interface d'administration.</li>
            </ul>

            <br />

            <span class="text-muted">* Les styles et images se trouvent dans les répertoires main/css ou main/img.
                Vous pouvez les récupérer depuis la copie de sauvegarde (que vous n'avez pas manqué de prendre).
                Toute image ou style modifié qui utilise le nom de l'image/style par défaut sera
                écrasé lors de l'étape suivante. Pour éviter la perte de customisations, assurez-vous toujours
                de copier les styles/images sous un nouveau nom et de modifier la copie et non l'original.
                L'original sera toujours écrasé par la nouvelle version. Dans Dok€os 1.8.5, nous avons changé
                le nom de quelques thèmes CSS. La compatibilité descendante est assurée par le fait que la mise à
                jour ne fait qu'ajouter de nouveaux thèmes, mais essayez toujours d'utiliser de préférence les
                nouveaux thèmes plutot que se conserver d'anciennes versions qui ne seront plus maintenues.</span>
            <br />

            <p></p>


            <p>
                <b>ATTENTION:</b><br />

                Ne supprimez pas le précédent dossier d'installation de Chamilo avant d'avoir installé le nouveau.
                Quand la mise à jour sera terminée, les dossiers obsolètes devraient être automatiquement pris en charge.
            </p>

            <h3>3.3 Mettre à jour depuis Chamilo 1.8.x</h3>
            Pour mettre à jour depuis une version antérieure à la 1.9.0, vous devrez commencer par la mettre à jour vers la version 1.9.10.x,
            et seulement alors mettre à jours vers la 1.11.x.
            Vous pouvez trouver une version téléchargeable de 1.9.10.x ici: <a href="https://github.com/chamilo/chamilo-lms/releases">https://github.com/chamilo/chamilo-lms/releases</a>
            <p></p>
            <h3>3.4 Dans les deux derniers cas</h3>

            Les répertoires suivants doivent être accessibles en lecture, écriture et
            exécution pour le serveur web:
            <ul>
                <li>[chamilo]/main/lang/ (pour supprimer les fichiers de langues inutiles)</li>
                <li>[chamilo]/courses/ (pour déplacer les cours dans le dossier app/courses)</li>
                <li>[chamilo]/archive/ (pour supprimer les fichiers inutiles ou les déplacer dans app/cache/)</li>
                <li>[chamilo]/home/ (pour déplacer les fichiers dans app/home)</li>
                <li>[chamilo]/app</li>
                <li>[chamilo]/web</li>
                <li>[chamilo]/vendor</li>
                <li>[chamilo]/main/default_course_document/images/</li>
            </ul>
            On Linux, Mac OS X and BSD operating systems you can quick-fix this using the
            <em>chmod 0777</em> command, but if you are unsure, we recommend you seek advice for
            your own OS on <a href="https://www.chamilo.org/forum">our forum</a>.
            In Windows, you may need to check the properties of the folders.
            <p></p>

            <hr style="width: 100%; height: 2px;" />

            <h2><a id="4._Troubleshooting"></a>4. Problèmes</h2>


            <p>If you have&nbsp;problems, go to the <a href="https://chamilo.org">Chamilo website</a> and ask a question on the
                <a href="https://chamilo.forum">support forum</a>. Please read the previous messages first to see if there is
                already an answer to your question.</p>


            <h2></h2>


            <hr style="width: 100%; height: 2px;" />
            <h2><a id="5._Administration_section"></a>5. Section d'administration</h2>

            <p>Pour accéder à la section d'administration, ouvrez un navigateur, chargez l'adresse de votre Chamilo
                et connectez-vous avec l'utilisateur administrateur.
                Vous verrez alors un onglet "Administration" dans le menu principal.
                Vous pouvez y gérer les utilisateurs, les cours, les sessions et
                l'apparence de votre site</p>

            <p></p>
            <hr style="width: 100%; height: 2px;" />
            <h2><a id="6._LDAP"></a>6. LDAP</h2>

            <p>
                <i>This part is optional, only organisations with an LDAP server will need to read this.</i><br />

                An LDAP module is already provided in Chamilo, but it has to be configured to make it work.</p>


            <h3><b>Compiler</b></h3>

            <p>
                Linux servers: It's possible that you have to recompile php with ldap support.
                Newer distributions also allow downloading rpms for additional packages.</p>


            <h3><b>Activer LDAP dans Chamilo</b></h3>

            <p class="text-muted">
                Note: Vérifiez la configuration LDAP  dans Chamilo pour voir le détail
            </p>

            <p>
                In [Chamilo folder]/app/config/configuration.php, around line 93, you'll find settings like the following: <br />

                // -> Uncomment the two lines below to activate LDAP AND edit main/inc/conf/auth.conf.php for configuration<br />
                // $extAuthSource["extldap"]["login"] = $_configuration['root_sys'].$_configuration['code_append']."auth/external_login/login.ldap.php";<br />
                // $extAuthSource["extldap"]["newUser"] = $_configuration['root_sys'].$_configuration['code_append']."auth/external_login/newUser.ldap.php";<br />
                <br />

                remove the // from the last two lines to activate LDAP.<br />
            </p>


            <h3><b>Settings</b></h3>

            <p>
                Ask the LDAP server admin for the settings:</p>

            <ul>

                <li>ldap server name</li>

                <li>ldap server port (usually 389)</li>

                <li>ldap dc</li>
            </ul>
            Since 1.8.5, you have to change the LDAP settings inside the "Portal
            administration" panel, under "Chamilo configuration settings", section
            "LDAP".
            <br />

            As an example, you should find the following kind of values:<br />

            LDAP main server's address: "myldapserver.com";  // your ldap server<br />

            LDAP main server's port: 389;                 // your ldap server's port number<br />

            LDAP domain: "dc=xx, dc=yy, dc=zz"; //domain<br />

            <br />


            <h3><b>Teacher/student status</b></h3>

            <p>
                By default, Chamilo will check if the "employeenumber" field has a value. If it has, then Chamilo will
                consider this user as being a teacher.<br />

                If you want to change this behaviour, you can edit main/auth/ldap/authldap.php, function ldap_put_user_info_locally(),
                and change the <em>if (empty($info_array[$tutor_field]))</em> condition to whatever suits you.<br />

                You can also remove this check by removing the condition and leaving only the <em>$status = STUDENT;</em> line.</p>


            <h3><b>Protected LDAP servers</b></h3>


            <p>
                Some LDAP servers do not support anonymous use of the directory services.<br />
                In this case, you should fill in the appropriate fields in the
                administration panel (e.g. "manager" and "mypassword") and Chamilo will
                try to authenticate using these, or fall back to anonymous mode before
                giving up.</p>


            <h3>LDAP import into sessions</h3>

            <p>There is a new set of scripts now that allow you to insert users
                from LDAP directly into a Chamilo session. This, however, relies on a
                set of static choices in the LDAP contact attributes.<br />

                The fields used intensively by the Chamlio module are:<br />
            </p>

            <ul>

                <li>uid, which is matched to the username in Chamilo</li>

                <li>userPassword, which is matched to the user password, although
                    this part will only work for non-encrypted passwords for now, but it
                    shouldn't be necessary if using the LDAP server as authentication</li>

                <li>ou should end with the year of the person registration or any
                    criteria you will use to filter users, so that they can be retrieved on
                    that criteria</li>

                <li>sn is used as the lastname field in Chamilo</li>

                <li>givenName is used as the firstname field in Chamilo</li>

                <li>mail is used as the email field in Chamilo</li>
            </ul>


            <hr style="width: 100%; height: 2px;" />

            <h2><a id="9._WIRIS_mathematical_formulas"></a>7. Formules mathématiques avec Wiris MathType</h2>
            <p>
                En installant ce plugin, vous intégrez Wiris MathType.<br />
                Cette activation ne sera pas complète à moins que vous n'ayez d'abord téléchargé le plugin <a href="https://www.wiris.com/plugins/ckeditor/download" target="_blank">PHP pour CKeditor WIRIS</a> et l'ayez décompressé dans main/inc/lib/javascript/ckeditor/plugins/ckeditor_wiris.<br /><br />
                Cette étape est nécessaire parce que WIRIS est un logiciel propriétaire et ses services sont de type <a href="https://www.wiris.com/store/who-pays" target="_blank">commerciaux</a>. Pour faire des modifications au plugin , éditez le fichier configuration.ini ou remplacez son contenu par le fichier configuration.ini.default de Chamilo.

            </p>
            <hr style="width: 100%; height: 2px;" />
            <h2><a id="10._Xapian_fulltext_indexing"></a>8. Indexation full-text avec Xapian</h2>
            <div>
                <em>Note</em>: This step will require a dedicated server or a virtual dedicated server as the packages involved are not available on most shared hosting solutions.<br />
                On Debian or Ubuntu 10.04 and superior, you will simply need to install the php5-xapian package and restart your web server:
            <pre>
sudo apt-get install php5-xapian
sudo /etc/init.d/apache2 restart
            </pre>

            Then go to your administration page -&gt; Configuration settings -&gt; Search
            and enable the search tool. Follow the recommendations on the page to get the
            complete indexing suite installed. Once you're done, all documents you import
            into your Chamilo portal in a recognized format will be indexed and searchable.
            Chamilo Administrators training (which you can ask any <a href="https://chamilo.org/en/providers">Chamilo's Official
                Provider</a> for) include a full review of the full-text search feature.
        </div>
        <p class="text-muted">
            Note: Xapian's licensing for the PHP extension is a bit different from what is necessary to enter the Debian repositories, so it has been excluded. You can, however, generate your own package by following the <a href="https://trac.xapian.org/wiki/FAQ/PHP%20Bindings%20Package">packaging instructions on Xapian's wiki</a>.
        </p>

        <hr style="width: 100%; height: 2px;" />
        <h2><a id="11._Chamilo_rapid_ppt_conversion"></a>9. Chamilo Rapide - Conversion de PPT</h2>
        <div>
            <em>Note</em>: This step will require a dedicated server or a virtual dedicated server as the packages involved are not available on most shared hosting solutions.<br />
            On Debian or Ubuntu 22.04 and superior, install LibreOffice v7 (or superior) and start it as a headless server:
        <pre>
sudo apt-get install libreoffice screen
sudo adduser rapid
sudo adduser rapid www-data
screen
sudo -s
su - rapid
/usr/bin/libreoffice --headless --accept="socket,host=127.0.0.1,port=2002;urp;"
CTRL+a, CTRL+d
        </pre>
        Then go to your administration page -&gt; <i>Chamilo Rapid</i> and set the host to "localhost" and the port to "2002". Save. Go to your course, learning path tool and see the new icon appeared. Import your PPT. This should work.
        <em>Note</em>: Sometimes, this doesn't work out so easily. You can probably ask for the assistance of any system administrator around with a bit of Java and PHP experience, or you can always ask one of the Chamilo's Official Providers for assistance (ask for a guaranteed commercial contract).
    </div>

    <hr style="width: 100%; height: 2px;" />
    <h2><a id="12._Setting_cron_up"></a>10. Configurer les tâches chronologiques</h2>
    <p>
        Since Chamilo 1.8.8, a few tasks need to be executed regularly in order to get
        the best out of your server resources. One of such tasks (and the only one
        around at the time of Chamilo 1.8.8) is the sending of internal messaging
        notifications by e-mail, i.e. when you receive an e-mail from another person or
        from a group inside the internal messaging system of Chamilo, if all e-mails are
        sent immediately, then you might not have the chance to receive them at your
        pace, once a day or even once a week. For cases like this you, as a Chamilo
        administrator, should set up a cron process on the server to check the queue of
        e-mails and send is timely.</p>
    <div>
        Setting up a cron task is easy and there are several ways to do it. We recommend
        you have a look at the <a href="https://drupal.org/cron">Drupal documentation
            for setting up cron</a> and define your own cron process as:
    <pre>
35 * * * * wget -O - -q -t 1 https://campus.example.com/main/cron/run.php
    </pre>
    Make sure you have a look into run.php as maybe you want to change a few
    settings there.
</div>

<hr style="width: 100%; height: 2px;" />
<h2><a id="13._Changing_language_names_order"></a>11. Changer l'ordre nom/prénom des langues</h2>
<div>
    As Chamilo becomes more popular and crosses many borders now, it frequently happens that administrators want to re-order the firstname and lastname fields in tables, and also on which field it is sorted first.<br/><br />
    This can easily be modified by editing the app/config/configuration.php file, finding the following section, uncommenting the PHP lines and adapting it to your language:<br />
<pre>// Custom name_order_conventions
//$_configuration['name_order_conventions'] = array(
// 'french' => array('format' => 'title last_name first_name', 'sort_by' => 'last_name')
//);</pre><br />
Feel free to change this to<br />
<pre>// Custom name_order_conventions
$_configuration['name_order_conventions'] = array(
 'french' => array('format' => 'first_name last_name', 'sort_by' => 'last_name')
);</pre><br />
for example. The effect should be immediate.
</div>
Please note that, although Chamilo allows you to define its position, the "title" field does not exist at this time, so no need to worry about it.
<hr style="width: 100%; height: 2px;" />
<h2><a id="14._Improving_files_download"></a>12. Améliorer la performance des téléchargements de fichiers</h2>
<div>
    File download can be very slow when passing through a PHP script to control permissions. One solution to this
    is to use the X-Sendfile header, which depends on a module on the webserver. <a href="https://stackoverflow.com/a/3731639/1406662">Check https://stackoverflow.com/a/3731639/1406662 for more details on implementing Sendfile</a>.
    Chamilo LMS 1.9.8 (and following versions) supports the X-Sendfile headers, but requires a specific line of configuration to be
    added to configuration.php:
<pre>
$_configuration['enable_x_sendfile_headers'] = true;
</pre>
If you have issues with files taking a long time to download, make sure you reconfigure your webserver and add this line. You should see a notable difference in download time.
</div>
<hr style="width: 100%; height: 2px;" />
<h2><a id="15._Videoconference"></a>13. Vidéo-conférence</h2>
<p>
    Chamilo supporte la connexion à deux serveurs de vidéo-conférence : BigBlueButton (versions 0.81 et 0.9) et OpenMeetings.<br />
    Tandis que BigBlueButton paraît plus simple d'installation, plus clairement documenté et plus
    abouti esthétiquement, certains utilisateurs ont attesté que OpenMeetings consomme moins
    de bande passante, est moins restrictif en termes d'environnement et offre plus d'outils
    et de connecteurs.<br />
    La décision vous revient, mais dans chaque cas vous aurez à installer un serveur de vidéo-conférence
    en plus du processus d'installation normal de Chamilo.<br />
    Consultez le <a href="https://docs.bigbluebutton.org/install/install.html">guide d'installation de BigBlueButton</a>
    Une fois celui-ci installé, entrez la commande "bbb-conf --secret" pour obtenir les paramètres à indiquer dans le plugin
    "Vidéo-conférence" de Chamilo (page Paramètres de configuration).<br />
    Une icône "Vidéo-conférence" devrait alors apparaître dans chaque cours.<br />
</p>
<hr style="width: 100%; height: 2px;" />

<h2><a id="16._Rewrite"></a>14. Réécriture</h2>
<p>
    Chamilo LMS 1.10 est la première version nécessitant que le serveur web autorise les redirections d'url (et donc 1.11 également).<br />
    Pour Apache, il s'agit d'active le module rewrite et d'autoriser l'utilisation des fichiers .htaccess ou d'ajouter une section spécifique dans le Virtual Host.<br />
    Pour Nginx, il s'agit de définir les règles de redirections dans le Virtual Host.<br /><br />
    Pour être certain que c'est à la portée de tous, nous recommandons le fichier de configuration ci-dessous pour vous aider dans les deux cas.
    Notez que l'utilisation d'un fichier .htaccess est la solution la plus facile mais peut altérer les performances de votre serveur,
    car les fichiers .htaccess sont interprêtés à *chaque* requête, alors qu'une section de configuration supplémentaire dans le Virtual Host
    est compilée uniquement lors du chargement du serveur.
<h3>Apache + .htaccess</h3>
<div>
    Pour activer le .htaccess dans Apache, vous devez juste vérifier une chose : dans un tag &lt;Directory&gt; du dossier racine de Chamilo, vérifiez que les lignes suivantes sont présentes :
<pre>
        AllowOverride All
		Order allow,deny
		allow from all
</pre>
ou, si vous travaillez avec Apache 2.4, la syntaxe est légèrement différente et ressemble plutôt à ça :
<pre>
        AllowOverride All
        Require all granted
</pre>
</div>
<h3>Apache RewriteRules</h3>
<pre>
  &lt;LocationMatch "/.git*"&gt;
	order deny,allow
	deny from all
  &lt;/LocationMatch&gt;

  &lt;Directory ~/.&gt;
    AllowOverride None
	Options -Indexes
  &lt;/Directory&gt;

  &lt;Directory "/var/www/chamilo"&gt;
	RewriteEngine On
	RewriteCond %{QUERY_STRING} ^id=(.*)$
    RewriteRule ^certificates/$ certificates/index.php?id=%1 [L]
    RewriteRule ^courses/([^/]+)/?$ main/course_home/course_home.php?cDir=$1 [QSA,L]
    RewriteRule ^courses/([^/]+)/index.php$ main/course_home/course_home.php?cDir=$1 [QSA,L]
    RewriteRule ^courses/([^/]+)/scorm/(.*([\.js|\.css|\.png|\.jpg|\.jpeg|\.gif]))$ app/courses/$1/scorm/$2 [QSA,L]
    RewriteRule ^courses/([^/]+)/scorm/(.*)$ main/document/download_scorm.php?doc_url=/$2&cDir=$1 [QSA,L]
    RewriteRule ^courses/([^/]+)/document/certificates/(.*)$ app/courses/$1/document/certificates/$2 [QSA,L]
    RewriteRule ^courses/([^/]+)/document/(.*)$ main/document/download.php?doc_url=/$2&cDir=$1 [QSA,L]
    RewriteRule ^courses/([^/]+)/upload/course_home_icons/(.*([\.js|\.css|\.png|\.jpg|\.jpeg|\.gif]))$ app/courses/$1/upload/course_home_icons/$2 [QSA,L]
    RewriteRule ^courses/([^/]+)/upload/([^/]+)/(.*)$ main/document/download_uploaded_files.php?code=$1&type=$2&file=$3 [QSA,L]
    RewriteRule ^courses/([^/]+)/work/(.*)$ main/work/download.php?file=work/$2&cDir=$1 [QSA,L]
    RewriteRule ^courses/([^/]+)/course-pic85x85.png$ main/inc/ajax/course.ajax.php?a=get_course_image&code=$1&image=course_image_source [QSA,L]
    RewriteRule ^courses/([^/]+)/course-pic.png$ main/inc/ajax/course.ajax.php?a=get_course_image&code=$1&image=course_image_large_source [QSA,L]
    RewriteRule ^courses/([^/]+)/(.*)$ app/courses/$1/$2 [QSA,L]
    RewriteRule ^session/(\d{1,})/about/?$ main/session/about.php?session_id=$1 [L]
    RewriteRule ^course/(\d{1,})/about/?$ main/course_info/about.php?course_id=$1 [L]
    RewriteRule ^badge/(\d{1,}) main/badge/issued.php?issue=$1 [L]
    RewriteRule ^skill/(\d{1,})/user/(\d{1,}) main/badge/issued_all.php?skill=$1&user=$2 [L]
    RewriteRule ^badge/(\d{1,})/user/(\d{1,}) main/badge/issued_all.php?skill=$1&user=$2 [L]
    RewriteRule ^main/exercice/(.*)$ main/exercise/$1 [QSA,L]
    RewriteRule ^main/newscorm/(.*)$ main/lp/$1 [QSA,L]
    RewriteRule ^service/(\d{1,})$ plugin/buycourses/src/service_information.php?service_id=$1 [L]
    RewriteRule ^lti/os$ plugin/ims_lti/outcome_service.php [L]
    RewriteRule ^(tests|.git) - [F,L,NC]
  &lt;/Directory&gt;
</pre>

            <h4>Note spéciale concernant le partage de questions entre cours</h4>
            Dans Chamilo 1.11.16, nous avons introduit la possibilité (voir configuration.php) de partager
            des questions entre différents cours. Cette fonctionnalité, si elle fonctionne très bien pour des
            questions de type texte, génère un nouveau problème lorsqu'une ressource média (image, vidéo, etc)
            fait partie de la question. L'utilisateur qui voit la question dans un cours vers lequel elle a
            été partagée mais n'a pas accès au cours original, ne pourra pas voir la ressource média parce
            que celle-ci se trouve uniquement dans le cours original.<br />
            Pour éviter ce problème, vous pouvez adapter votre .htaccess (ou votre VirtualHost si c'est là
            que vous avez placé la configuration) pour permettre aux fichiers de type média d'&ecirc;tre lus
            directement (sans m&ecirc;me se connecter au portail). Cela améliorera parallèlement la vitesse
            de chargement à ces médias, mais introduira une baisse du niveau de sécurité, puisque ces ressources
            seront directement accessibles par quiconque a accès à la page d'accueil du portail et connaît
            les adresses exactes de ces médias. À prendre en considération, donc.<br /><br />
            Pour appliquer le patch, localisez la ligne suivante dans votre .htaccess .htaccess:<br /><br />
            <pre>    RewriteRule ^courses/([^/]+)/document/(.*)$ main/document/download.php?doc_url=/$2&cDir=$1 [QSA,L]</pre>
            et supprimez-la ou commentez-la, puis remplacez-la par ces deux lignes :<br /><br />
            <pre>    RewriteCond %{REQUEST_URI} !\.(gif|jpg|jpeg|png|webp|ico|icon|swf|avi|mp3|ogg|wav|ttf|otf|eot|woff|webm|mp4)
    RewriteRule ^courses/([^/]+)/document/(.*)$ main/document/download.php?doc_url=/$2&cDir=$1 [QSA|L]</pre>


<h3>Nginx</h3>
Nginx ne supporte pas les règles .htaccess, donc vous n'avez pas d'autre option que d'appliquer les règles suivantes (notez que la configuration PHP peut changer).
Ce sont uniquement les redirections à placer dans un bloc server{}, comme les autres valeurs peuvent changer d'une installation à l'autre.
<pre>
  # Add your own "server {" header here with listen, server_name, access_log, error_log, index, root and error_page params

  charset utf-8;

  location @rewrite{
    rewrite ^certificates/$ certificates/index.php last;
    rewrite ^/courses/([^/]+)/$ /main/course_home/course_home.php?cDir=$1 last;
    rewrite ^/courses/([^/]+)/index.php$ /main/course_home/course_home.php?cDir=$1 last;
    rewrite ^/courses/([^/]+)/scorm/(.*([\.js|\.css|\.png|\.jpg|\.jpeg|\.gif]))$ app/courses/$1/scorm/$2 last;
    rewrite ^/courses/([^/]+)/scorm/(.*)$ /main/document/download_scorm.php?doc_url=/$2&cDir=$1 last;
    # Alternatively, you can choose to give direct access to all SCORM files, which is much faster but less secure
    # rewrite "^/courses/([^/]+)/scorm/(.*)$" /app/courses/$1/scorm/$2 break;

    rewrite "^/courses/([^/]+)/document/certificates/(.*)$" /app/courses/$1/document/certificates/$2 last;
    rewrite ^/courses/([^/]+)/document/(.*)$ /main/document/download.php?doc_url=/$2&cDir=$1 last;
    rewrite ^/courses/([^/]+)/upload/([^/]+)/(.*)$ /main/document/download_uploaded_files.php?code=$1&type=$2&file=$3 last;
    rewrite ^/courses/([^/]+)/work/(.*)$ /main/work/download.php?file=work/$2&cDir=$1 last;
    rewrite ^/courses/([^/]+)/upload/course_home_icons/(.*([\.png|\.jpg|\.jpeg|\.gif]))$ app/courses/$1/upload/course_home_icons/$2 last;
    rewrite ^/courses/([^/]+)/(.*)$ /app/courses/$1/$2 last;
    rewrite ^/session/([^/]+)/about/?$ /main/session/about.php?session_id=$1 last;
    rewrite ^/course/([^/]+)/about/?$ /main/course_info/about.php?course_id=$1 last;
    rewrite ^/badge/(\d+) /main/badge/issued.php?issue=$1 last;
    rewrite ^/skill/(\d+)/user/(\d+)$ /main/badge/issued_all.php?skill=$1&user=$2 last;
    rewrite ^/badge/(\d+)/user/(\d+)$ /main/badge/issued_all.php?skill=$1&user=$2 last;
    rewrite ^/main/exercice/(.*)$ /main/exercise/$1 last;
    rewrite ^/main/newscorm/(.*)$ /main/lp/$1 last;
    rewrite ^/service/(\d+)$ /plugin/buycourses/src/service_information.php?service_id=$1 last;
    rewrite "^/main/upload/users/(.*)/(.*)/my_files/(.*)$" /app/upload/users/$1/$2/my_files/$3 last;

    try_files $uri /index.php$is_args$args;
    break;
  }

  location / {
    try_files $uri @rewrite;
  }

  location /main {
    rewrite ^/main/([^/]+)/?$ /main/$1/index.php last;
  }

  location ~ \.php$ {
    client_max_body_size 20M;
    try_files $uri @rewrite;

    fastcgi_pass unix:/var/run/php7.4-fpm.sock;
    fastcgi_split_path_info ^(.+\.php)(/.*)$;
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_param HTTPS off;
  }

  # Serve static files directly
  location ~* \.(png|jpe?g|gif|ico|js|css|mp3|swf|flv|mp4|ogg|woff|woff2)$ {
    rewrite ^/courses/([^/]+)/course-pic85x85.png$ /app/courses/$1/course-pic85x85.png last;
    rewrite ^/courses/([^/]+)/course-pic.png$ /app/courses/$1/course-pic.png last;
    rewrite ^/courses/([^/]+)/scorm/(.*)$ /main/document/download_scorm.php?doc_url=/$2&cDir=$1 last;
    rewrite ^/courses/([^/]+)/document/(.*)$ /main/document/download.php?doc_url=/$2&cDir=$1 last;
    rewrite ^/courses/([^/]+)/work/(.*)$ /main/work/download.php?file=work/$2&cDir=$1 last;
    rewrite ^/courses/([^/]+)/upload/(.*)$ /app/courses/$1/upload/$2 last;
    # For all these media resources not treated by previous rewrites, give direct access (no permission check)
    rewrite ^/courses/(.*)$ /app/courses/$1 break;
    expires 30d;
    access_log off;
    try_files $uri @rewrite;
  }

  location ~ ~\.(ht|git){
    deny all;
  }
  location ^~ /tests/ {
    deny all;
  }

</pre>
            <h3>IIS</h3>
            <div>
                Les utilisateurs @ullfindsmit et @rozepeda sur Github ont été bien aimables en contribuant à la configuration suivante
                pour IIS, qu'ils ont testé au préalable. Ces règles sont basées sur les configurations ci-dessus et, bien
                que nous n'ayons pas testé la configuration nous-même, elle est suffisamment proche de la configuration
                d'Apache et de Nginx pour nous permettre de vous la suggérer ici:<br /><br />
                <pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
    &lt;system.webServer&gt;
        &lt;httpRedirect enabled="false" destination="" httpResponseStatus="Permanent" /&gt;
        &lt;rewrite&gt;
            &lt;rules&gt;
                &lt;rule name="rule 1v" stopProcessing="true"&gt;
                    &lt;match url="^certificates/$" /&gt;
                    &lt;action type="Rewrite" url="certificates/index.php?id=%1" appendQueryString="false" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule 2v" enabled="true" stopProcessing="true"&gt;
                    &lt;match url="^courses/([^/]+)/?$" /&gt;
                    &lt;action type="Rewrite" url="main/course_home/course_home.php?cDir={R:1}" appendQueryString="true" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule 3v" enabled="true" stopProcessing="true"&gt;
                    &lt;match url="^courses/([^/]+)/index.php$" /&gt;
                    &lt;action type="Rewrite" url="main/course_home/course_home.php?cDir={R:1}" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule 4v" stopProcessing="true"&gt;
                    &lt;match url="^courses/([^/]+)/scorm/(.*([\.js|\.css|\.png|\.jpg|\.jpeg|\.gif]))$" /&gt;
                    &lt;action type="Rewrite" url="app/courses/{R:1}/scorm/{R:2}" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule 5v" stopProcessing="true"&gt;
                    &lt;match url="^courses/([^/]+)/scorm/(.*)$" /&gt;
                    &lt;action type="Rewrite" url="main/document/download_scorm.php?doc_url=/{R:2}&amp;cDir={R:1}" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v6" stopProcessing="true"&gt;
                    &lt;match url="^courses/([^/]+)/document/certificates/(.*)$" /&gt;
                    &lt;action type="Rewrite" url="app/courses/{R:1}/document/certificates/{R:2}" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v7" stopProcessing="true"&gt;
                    &lt;match url="^courses/([^/]+)/document/(.*)$" /&gt;
                    &lt;action type="Rewrite" url="main/document/download.php?doc_url=/{R:2}&amp;cDir={R:1}" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v8" stopProcessing="true"&gt;
                    &lt;match url="^courses/([^/]+)/upload/course_home_icons/(.*([\.js|\.css|\.png|\.jpg|\.jpeg|\.gif]))$" /&gt;
                    &lt;action type="Rewrite" url="app/courses/{R:1}/upload/course_home_icons/{R:2}" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v9" stopProcessing="true"&gt;
                    &lt;match url="^courses/([^/]+)/upload/([^/]+)/(.*)$" /&gt;
                    &lt;action type="Rewrite" url="main/document/download_uploaded_files.php?code={R:1}&amp;type={R:2}&amp;file={R:3}" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v10" stopProcessing="true"&gt;
                    &lt;match url="^courses/([^/]+)/work/(.*)$" /&gt;
                    &lt;action type="Rewrite" url="main/work/download.php?file=work/{R:2}&amp;cDir={R:1}" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v11" stopProcessing="true"&gt;
                    &lt;match url="^courses/([^/]+)/course-pic85x85.png$" /&gt;
                    &lt;action type="Rewrite" url="main/inc/ajax/course.ajax.php?a=get_course_image&amp;code={R:1}&amp;image=course_image_source" appendQueryString="true" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v12" stopProcessing="true"&gt;
                    &lt;match url="^courses/([^/]+)/course-pic.png$" /&gt;
                    &lt;action type="Rewrite" url="main/inc/ajax/course.ajax.php?a=get_course_image&amp;code={R:1}&amp;image=course_image_large_source" appendQueryString="true" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v13" stopProcessing="true"&gt;
                    &lt;match url="^courses/([^/]+)/(.*)$" /&gt;
                    &lt;action type="Rewrite" url="app/courses/{R:1}/{R:2}" appendQueryString="false" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v14" stopProcessing="true"&gt;
                    &lt;match url="^session/(\d{1,})/about/?$" /&gt;
                    &lt;action type="Rewrite" url="main/session/about.php?session_id={R:1}" appendQueryString="false" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v15" stopProcessing="true"&gt;
                    &lt;match url="^course/(\d{1,})/about/?$" /&gt;
                    &lt;action type="Rewrite" url="main/course_info/about.php?course_id={R:1}" appendQueryString="false" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v16" stopProcessing="true"&gt;
                    &lt;match url="^badge/(\d{1,})" /&gt;
                    &lt;action type="Rewrite" url="main/badge/issued.php?issue={R:1}" appendQueryString="false" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v17" stopProcessing="true"&gt;
                    &lt;match url="^skill/(\d{1,})/user/(\d{1,})" /&gt;
                    &lt;action type="Rewrite" url="main/badge/issued_all.php?skill={R:1}&amp;user={R:2}" appendQueryString="false" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v18" stopProcessing="true"&gt;
                    &lt;match url="^badge/(\d{1,})/user/(\d{1,})" /&gt;
                    &lt;action type="Rewrite" url="main/badge/issued_all.php?skill={R:1}&amp;user={R:2}" appendQueryString="false" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v19" stopProcessing="true"&gt;
                    &lt;match url="^main/exercice/(.*)$" /&gt;
                    &lt;action type="Rewrite" url="main/exercise/{R:1}" appendQueryString="true" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v20" stopProcessing="true"&gt;
                    &lt;match url="^main/newscorm/(.*)$" /&gt;
                    &lt;action type="Rewrite" url="main/lp/{R:1}" appendQueryString="true" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v21" stopProcessing="true"&gt;
                    &lt;match url="^service/(\d{1,})$" /&gt;
                    &lt;action type="Rewrite" url="plugin/buycourses/src/service_information.php?service_id={R:1}" appendQueryString="false" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v22" stopProcessing="true"&gt;
                    &lt;match url="^lti/os$" /&gt;
                    &lt;action type="Rewrite" url="plugin/ims_lti/outcome_service.php" appendQueryString="false" /&gt;
                &lt;/rule&gt;
                &lt;rule name="rule v23" stopProcessing="true"&gt;
                    &lt;match url="^(tests|.git)" ignoreCase="false" /&gt;
                    &lt;action type="Rewrite" url="/-" /&gt;
                &lt;/rule&gt;
            &lt;/rules&gt;
        &lt;/rewrite&gt;
    &lt;/system.webServer&gt;
&lt;/configuration&gt;
        </pre>
            </div>

            <hr style="width: 100%; height: 2px;" />

<p>
    <br />
    <br />
    Adresse de contact<br />
    Mail: info@chamilo.org<br />
    <br />
</p>
<hr />

</div>

<hr />
<a href="https://validator.w3.org/check?uri=referer"><img src="//www.w3.org/Icons/valid-xhtml10-blue" alt="Valid XHTML 1.0 Transitional" style="margin: 1em; float: right;" height="31" width="88" /></a>
<a href="https://jigsaw.w3.org/css-validator/">
    <img src="//jigsaw.w3.org/css-validator/images/vcss-blue" style="margin: 1em; float: right;" alt="Valid CSS" />
</a>
</body>
</html>
